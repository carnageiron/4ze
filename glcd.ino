#include <Adafruit_GFX.h>   // Include Adafruit GFX library
#include <KS0108_GLCD.h>    // Include KS0108 GLCD library

// Initialize KS0108 GLCD with the following pin configuration
KS0108_GLCD display = KS0108_GLCD(A0, A1, A2, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12);

#define NUMFLAKES     10 // Number of snowflakes in the animation example
#define LOGO_HEIGHT   64
#define LOGO_WIDTH    128

// Bitmap logo data
static const unsigned char PROGMEM logo_bmp[] = {
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B01100000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B11000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000001, 0B11000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000011, 0B11000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000111, 0B11000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00011111, 0B11000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00111111, 0B10000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B01111111, 0B10000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B11111111, 0B10000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000001, 0B11111111, 0B10000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00001111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00011111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00111111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B01111111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000001, 
0B11111111, 0B11111110, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000011, 
0B11111111, 0B11111110, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000111, 
0B11111111, 0B11111110, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00001111, 
0B11011111, 0B11111110, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00111111, 
0B11111111, 0B11111111, 0B11111111, 0B11111111, 
0B11111111, 0B11111100, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B01111111, 
0B11111111, 0B11111111, 0B11111111, 0B11111111, 
0B11111111, 0B11111000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B11111111, 
0B11111111, 0B11111111, 0B11111111, 0B11111111, 
0B11111111, 0B11100000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000001, 0B11111111, 
0B11111111, 0B11111111, 0B11111111, 0B11111111, 
0B11111111, 0B11000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000011, 0B11111111, 
0B11111111, 0B11111111, 0B11111111, 0B11111111, 
0B11111111, 0B10000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00001111, 0B11111111, 
0B11111111, 0B11111111, 0B11111111, 0B11111111, 
0B11111111, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11111000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11111011, 0B11111111, 0B11111111, 
0B11111111, 0B11111111, 0B11110000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11111011, 0B11111111, 0B11111111, 
0B11111111, 0B11111111, 0B11100000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11111011, 0B11111111, 0B11111111, 
0B11111111, 0B11111111, 0B11100000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11110011, 0B11111111, 0B11111111, 
0B11111111, 0B11111111, 0B11100000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11110011, 0B11111111, 0B11111111, 
0B11111111, 0B11111111, 0B11100000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11110000, 0B00000001, 0B11111110, 
0B11111111, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11110000, 0B00000011, 0B11111100, 
0B11111110, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11100000, 0B00000111, 0B11111000, 
0B11111110, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11100000, 0B00001111, 0B11110000, 
0B11111111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11100000, 0B00111111, 0B11100001, 
0B11111111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11100000, 0B01111111, 0B10000001, 
0B11111111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11100000, 0B11111111, 0B00000001, 
0B11111111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11000001, 0B11111110, 0B00000001, 
0B11111100, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11000011, 0B11111100, 0B00000001, 
0B11111100, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11001111, 0B11110000, 0B00000011, 
0B11111100, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B11011111, 0B11100000, 0B00000011, 
0B11111111, 0B11111111, 0B10000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B10011111, 0B11111111, 0B11111111, 
0B11111111, 0B11111111, 0B10000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B10111111, 0B11111111, 0B11111111, 
0B11111111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B10111111, 0B11111111, 0B11111111, 
0B11111111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B10111111, 0B11111111, 0B11111111, 
0B11111111, 0B11111111, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B10000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B01111111, 0B11000000, 0B11111000, 
0B00011111, 0B10000111, 0B10011110, 0B00111000, 
0B01111111, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B01111111, 0B11100000, 0B11111000, 
0B01111111, 0B11000111, 0B00111110, 0B00111000, 
0B11111111, 0B10000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B01111001, 0B11100001, 0B11111000, 
0B01111001, 0B11100111, 0B00111111, 0B00111001, 
0B11100011, 0B11000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000011, 0B01110001, 0B11100001, 0B11111000, 
0B11110001, 0B11101111, 0B00111111, 0B00111011, 
0B11000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000010, 0B01111111, 0B11100011, 0B10111100, 
0B11110000, 0B00001111, 0B00111111, 0B11111011, 
0B11000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000010, 0B11111111, 0B11000011, 0B10111100, 
0B11110000, 0B00001111, 0B00111011, 0B11110011, 
0B11001111, 0B10000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000010, 0B11110111, 0B10000111, 0B11111100, 
0B11110001, 0B11001110, 0B01111011, 0B11110011, 
0B11011111, 0B10000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000010, 0B11110011, 0B10001111, 0B11111100, 
0B11110011, 0B11001110, 0B01110001, 0B11110011, 
0B11100111, 0B10000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000010, 0B11100011, 0B11001110, 0B00011100, 
0B01111111, 0B10011110, 0B01110000, 0B11110001, 
0B11111111, 0B10000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000001, 0B11100011, 0B11011100, 0B00011110, 
0B00111111, 0B00011110, 0B01110000, 0B11100000, 
0B11111111, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000, 
0B00000000, 0B00000000, 0B00000000, 0B00000000
};

void setup() {
    Serial.begin(9600);

    // Initialize the display
    if (display.begin(KS0108_CS_ACTIVE_HIGH) == false) {
        Serial.println(F("Display initialization failed!"));
        while (true);  // Stay here forever
    }

    display.clearDisplay(); // Clear the buffer
    testdrawbitmap();       // Draw a small bitmap image
    delay(1000);
    testdrawstyles();       // Draw stylized characters
}

void loop() {
    testdrawstyles(); 
}

// Function to draw a bitmap
void testdrawbitmap() {
    display.clearDisplay();
    display.drawBitmap(
        (display.width()  - LOGO_WIDTH) / 2,
        (display.height() - LOGO_HEIGHT) / 2,
        logo_bmp, LOGO_WIDTH, LOGO_HEIGHT, 1);
    display.display();
    delay(1000);
}

// Function to display speed
void testdrawstyles() {
    int speed = analogRead(A3);
    int speed1 = map(speed, 0, 1023, 0, 90);
  
    display.clearDisplay();
    display.setTextSize(5);             // Normal 1:1 pixel scale
    display.setTextColor(KS0108_ON);    // Draw white text
    display.setCursor(5, 15);           // Start at top-left corner
    display.print(speed1);
    display.setTextSize(2); 
    display.setCursor(65, 32);
    display.print(F("KM/H"));
    display.display();
}